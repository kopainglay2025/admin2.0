server {
    # ဤ configuration သည် Domain ၏ 80 (HTTP) မှ ဝင်လာသည်ကို 443 (HTTPS) သို့ အလိုအလျောက် ပြောင်းလဲပေးသည်။
    listen 80;
    server_name tpfootball.live; # သင့် domain ဖြင့် ပြင်ဆင်ပါ

    # HTTPS သို့ 301 Permanent Redirect လုပ်ခြင်း
    return 301 https://$host$request_uri;
}

server {
    # ဤ configuration သည် SSL (HTTPS) traffic ကို စီမံခန့်ခွဲသည်။
    listen 443 ssl;
    server_name tpfootball.live; # သင့် domain ဖြင့် ပြင်ဆင်ပါ

    # =======================================================
    # !!! SSL CERTIFICATE SETTINGS - ဤအပိုင်းကို ပြင်ဆင်ရန် လိုအပ်သည် !!!
    # Let's Encrypt သို့မဟုတ် အခြား certificate လမ်းကြောင်းများဖြင့် အစားထိုးပါ
    # =======================================================
    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem; 
    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;
    
    # Optional: SSL/TLS Hardening
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
    # =======================================================

    # Max upload size limit (optional, for files)
    client_max_body_size 10M;

    location / {
        # Flask/SocketIO Server ၏ HTTP Port 4210 သို့ ပြောင်းပေးခြင်း
        # 127.0.0.1 သည် Flask application ကို run ထားသည့် port ကို ညွှန်ပြသည်။
        proxy_pass http://127.0.0.1:4210;

        # Standard Proxy Headers
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # =======================================================
        # !!! Socket.IO (WebSockets) အတွက် မဖြစ်မနေလိုအပ်သော Headers !!!
        # =======================================================
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        
        # Timeout များကို တိုးမြှင့်ခြင်း (Optional)
        proxy_read_timeout 86400; 
        proxy_send_timeout 86400;
    }
    
    # Webhook endpoint သည် /webhook ဖြစ်သော်လည်း / ဖြင့် proxy လုပ်ထားသောကြောင့် အထူးတလည် သတ်မှတ်ရန် မလိုပါ။
}
